import type { Meta, StoryObj } from "@storybook/react";
import { InfluentialCases } from "./InfluentialCases";
import { isDarkBackground } from "../../../.storybook/utils";

// More on how to set up stories at: https://storybook.js.org/docs/react/writing-stories/introduction#default-export
const meta: Meta<typeof InfluentialCases> = {
  component: InfluentialCases,
  // This component will have an automatically generated Autodocs entry: https://storybook.js.org/docs/7.0/react/writing-docs/docs-page
  tags: ["autodocs"],
  parameters: {
    // More on Story layout: https://storybook.js.org/docs/react/configure/story-layout
    layout: "centered",
  },
  // More on argTypes: https://storybook.js.org/docs/react/api/argtypes
  argTypes: {},
  args: {
    style: {
      height: "90vh",
      width: "90vw",
      // overflow: "hidden",
    },
  },
  render: (args, context) => {
    return <InfluentialCases {...args} isDark={isDarkBackground(context)} />;
  },
};

export default meta;
type Story = StoryObj<typeof InfluentialCases>;

// More on component templates: https://storybook.js.org/docs/react/writing-stories/introduction#using-args
export const Cholesterol: Story = {
  // More on args: https://storybook.js.org/docs/react/writing-stories/args
  args: {
    feature: "chol",
    actualValue: 252,
    densityUncertainty: 52.80061553591218,
    idFeatures: ["age", "chol"],
    influenceCases: [
      {
        ".session": "3028ea6e-de18-41cf-8579-07eb0304059d",
        chol: 264,
        thal: 2,
        exang: 0,
        ".session_training_index": 298,
        age: 45,
        sex: 1,
        cp: 1,
        thalach: 132,
        ".influence_weight": 0.5645133348066479,
        fbs: 0,
        ca: 0,
        slope: 2,
        ecg: 0,
        trestbps: 110,
        class: 1,
        oldpeak: 1.2,
      },
      {
        ".session": "3028ea6e-de18-41cf-8579-07eb0304059d",
        chol: 219,
        thal: 2,
        exang: 0,
        ".session_training_index": 109,
        age: 39,
        sex: 1,
        cp: 4,
        thalach: 140,
        ".influence_weight": 0.43548661040784065,
        fbs: 0,
        ca: 0,
        slope: 2,
        ecg: 0,
        trestbps: 118,
        class: 1,
        oldpeak: 1.2,
      },
    ],
    predictionCase: {
      age: 50,
      sex: 1,
      cp: 1,
      trestbps: 130,
      chol: 262,
      fbs: 0,
      ecg: 0,
      thalach: 140,
      exang: 0,
      oldpeak: 1.5,
      slope: 2,
      ca: 0,
      thal: 2,
      class: 1,
    },
    predictedValue: 262,
    predictedUncertainty: 38.02014353196766,
  },
};

export const Asteroids: Story = {
  args: {
    actualValue: 1.01338,
    densityValues: [
      0.94378927, 0.94381719, 0.91159223, 1.07626361, 1.07626438, 1.10397012,
      0.96471764, 0.91160381, 0.96472433, 0.94737651, 0.99307015, 1.076259,
      1.01725513, 1.07626981, 0.94380866, 1.01722964, 1.0172569, 0.96472304,
      0.91160213, 0.94380115, 0.96473848, 0.94381857, 1.01724856, 1.10398487,
      0.94740014, 0.96472522, 1.01725589, 0.94736884, 1.01725858, 1.01723953,
      0.94382603, 1.10397368, 0.94739998, 1.07625574, 1.0762502, 0.94381345,
      0.94380702, 0.99309961, 0.99310306, 1.01724927, 0.96472309, 0.99310534,
      0.94382944, 1.07625127, 0.91159167, 0.96473015, 0.96471678, 1.01724645,
      1.01725075, 0.99309821, 1.10398311, 0.9647405, 0.94382294, 0.94382752,
      1.10398277, 0.99310282, 0.99309705, 0.96472934, 0.94381132, 1.01724492,
      0.99310553, 0.94381392, 0.91158154, 0.91162033, 1.10398608, 0.99310262,
      0.99311118, 0.94381083, 1.10398747, 0.96472544, 1.10397795, 1.07625682,
      0.96471485, 0.94740464, 0.91161314, 1.10397012, 1.10397472, 1.01726719,
      0.91160105, 0.96471938, 0.96472861, 1.07623961, 0.96472543, 0.9438142,
      0.94739178, 0.91158569, 0.9930946, 0.91160722, 0.94739259, 0.99311534,
      1.10397899, 0.9115968, 0.94381847, 0.94738938, 0.94739966, 0.94739998,
      0.94740796, 0.96474108, 0.94738954, 0.91158901,
    ],
    // densityUncertainty: 0,
    feature: "moid",
    influenceCases: [
      {
        full_name: "3135 Lauer (1981 EC9)",
        a: 2.420304108,
        e: 0.139376529,
        G: null,
        i: 5.980839309,
        om: 304.9144217,
        w: 118.4656864,
        q: 2.082970523,
        ad: 2.757637693,
        per_y: 3.765417261,
        data_arc: 14915,
        condition_code: 0,
        n_obs_used: 1456,
        H: 13.8,
        diameter: null,
        extent: null,
        albedo: null,
        rot_per: null,
        GM: null,
        BV: null,
        UB: null,
        IR: null,
        spec_B: null,
        spec_T: null,
        neo: "N",
        pha: "N",
        moid: 1.10398,
        ".influence_weight": 0.12706418560122543,
        ".session": "test",
        ".session_training_index": 1,
      },
      {
        full_name: "4549 Burkhardt (1276 T-2)",
        a: 2.435992689,
        e: 0.154852501,
        G: null,
        i: 2.82800126,
        om: 32.53274938,
        w: 52.20939042,
        q: 2.05877313,
        ad: 2.813212249,
        per_y: 3.802088076,
        data_arc: 23750,
        condition_code: 0,
        n_obs_used: 1374,
        H: 14.2,
        diameter: null,
        extent: null,
        albedo: null,
        rot_per: null,
        GM: null,
        BV: null,
        UB: null,
        IR: null,
        spec_B: null,
        spec_T: null,
        neo: "N",
        pha: "N",
        moid: 1.07626,
        ".influence_weight": 0.12634202646304085,
        ".session": "test",
        ".session_training_index": 2,
      },
      {
        full_name: "4579 Puccini (1989 AT6)",
        a: 2.39908342,
        e: 0.15333752,
        G: null,
        i: 2.213643473,
        om: 111.4133909,
        w: 139.8868548,
        q: 2.031213919,
        ad: 2.766952921,
        per_y: 3.716004457,
        data_arc: 15040,
        condition_code: 0,
        n_obs_used: 2229,
        H: 13.8,
        diameter: null,
        extent: null,
        albedo: null,
        rot_per: null,
        GM: null,
        BV: null,
        UB: null,
        IR: null,
        spec_B: null,
        spec_T: null,
        neo: "N",
        pha: "N",
        moid: 1.01725,
        ".influence_weight": 0.12508958083880758,
        ".session": "test",
        ".session_training_index": 3,
      },
      {
        full_name: "4476 Bernstein (1983 DE)",
        a: 2.384603404,
        e: 0.191499429,
        G: null,
        i: 3.369927304,
        om: 94.7967901,
        w: 345.2767183,
        q: 1.927953213,
        ad: 2.841253595,
        per_y: 3.682412547,
        data_arc: 14653,
        condition_code: 0,
        n_obs_used: 1897,
        H: 14,
        diameter: null,
        extent: null,
        albedo: null,
        rot_per: null,
        GM: null,
        BV: null,
        UB: null,
        IR: null,
        spec_B: null,
        spec_T: null,
        neo: "N",
        pha: "N",
        moid: 0.943815,
        ".influence_weight": 0.12495685786445948,
        ".session": "test",
        ".session_training_index": 4,
      },
      {
        full_name: "4444 Escher (1985 SA)",
        a: 2.32346575,
        e: 0.135256466,
        G: null,
        i: 7.39179449,
        om: 121.2566487,
        w: 181.9089102,
        q: 2.009201985,
        ad: 2.637729516,
        per_y: 3.541706878,
        data_arc: 12336,
        condition_code: 0,
        n_obs_used: 2124,
        H: 13.7,
        diameter: null,
        extent: null,
        albedo: null,
        rot_per: null,
        GM: null,
        BV: null,
        UB: null,
        IR: null,
        spec_B: null,
        spec_T: null,
        neo: "N",
        pha: "N",
        moid: 0.993099,
        ".influence_weight": 0.12475411617581754,
        ".session": "test",
        ".session_training_index": 5,
      },
      {
        full_name: "3081 Martinuboh (1971 UP)",
        a: 2.41129307,
        e: 0.183327742,
        G: null,
        i: 5.286151726,
        om: 43.78298038,
        w: 279.5198666,
        q: 1.969236157,
        ad: 2.853349983,
        per_y: 3.7444083,
        data_arc: 24446,
        condition_code: 0,
        n_obs_used: 1695,
        H: 13.7,
        diameter: null,
        extent: null,
        albedo: null,
        rot_per: null,
        GM: null,
        BV: null,
        UB: null,
        IR: null,
        spec_B: null,
        spec_T: null,
        neo: "N",
        pha: "N",
        moid: 0.964725,
        ".influence_weight": 0.12448757328173223,
        ".session": "test",
        ".session_training_index": 6,
      },
      {
        full_name: "3529 Dowling (1981 EQ19)",
        a: 2.382537884,
        e: 0.183168802,
        G: null,
        i: 2.762782159,
        om: 193.9652682,
        w: 184.6803071,
        q: 1.946131274,
        ad: 2.818944493,
        per_y: 3.677629078,
        data_arc: 24066,
        condition_code: 0,
        n_obs_used: 1166,
        H: 14.7,
        diameter: "6.088",
        extent: null,
        albedo: 0.12,
        rot_per: null,
        GM: null,
        BV: null,
        UB: null,
        IR: null,
        spec_B: null,
        spec_T: null,
        neo: "N",
        pha: "N",
        moid: 0.947403,
        ".influence_weight": 0.12380297663777487,
        ".session": "test",
        ".session_training_index": 7,
      },
      {
        full_name: "4762 Dobrynya (1982 SC6)",
        a: 2.357942989,
        e: 0.202104453,
        G: null,
        i: 6.909294476,
        om: 11.66769706,
        w: 76.16214444,
        q: 1.881392211,
        ad: 2.834493768,
        per_y: 3.62083015,
        data_arc: 19834,
        condition_code: 0,
        n_obs_used: 1428,
        H: 13.4,
        diameter: null,
        extent: null,
        albedo: null,
        rot_per: null,
        GM: null,
        BV: null,
        UB: null,
        IR: null,
        spec_B: null,
        spec_T: null,
        neo: "N",
        pha: "N",
        moid: 0.911597,
        ".influence_weight": 0.123502683137142,
        ".session": "test",
        ".session_training_index": 8,
      },
    ],
    predictionCase: {
      full_name: "200002 Hehe (2007 JZ43)",
      a: 2.409756829,
      e: 0.158911829,
      G: null,
      i: 6.959367932,
      om: 116.5920755,
      w: 198.7142948,
      q: 2.026817963,
      ad: 2.792695694,
      per_y: 3.740830511,
      data_arc: 6472,
      condition_code: 0.0,
      n_obs_used: 226,
      H: 16.7,
      diameter: null,
      extent: null,
      albedo: null,
      rot_per: null,
      GM: null,
      BV: null,
      UB: null,
      IR: null,
      spec_B: null,
      spec_T: null,
      neo: "N",
      pha: "N",
      moid: 1.01338,
    },
    predictedValue: 0.995303,
    predictedUncertainty: 0.03798149514668741,
  },
};

// Object.entries(df).reduce((cases, [key, values]) => {
//   Object.values(values).forEach((value, index) => {
//     cases[index] ||= {};
//     cases[index][key] = value;
//   });
//   return cases;
// }, []);
//
